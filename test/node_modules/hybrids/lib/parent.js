"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = parent;

function walk(node, fn) {
  var parentElement = node.parentElement || node.parentNode.host;

  while (parentElement) {
    var hybrids = parentElement.constructor.hybrids;

    if (hybrids && fn(hybrids)) {
      return parentElement;
    }

    parentElement = parentElement.parentElement || parentElement.parentNode && parentElement.parentNode.host;
  }

  return parentElement || null;
}

function parent(hybridsOrFn) {
  var fn = typeof hybridsOrFn === 'function' ? hybridsOrFn : function (hybrids) {
    return hybrids === hybridsOrFn;
  };
  return {
    get: function get(host) {
      return walk(host, fn);
    },
    connect: function connect(host, key, invalidate) {
      var target = host[key];

      if (target) {
        return invalidate;
      }

      return false;
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJlbnQuanMiXSwibmFtZXMiOlsid2FsayIsIm5vZGUiLCJmbiIsInBhcmVudEVsZW1lbnQiLCJwYXJlbnROb2RlIiwiaG9zdCIsImh5YnJpZHMiLCJjb25zdHJ1Y3RvciIsInBhcmVudCIsImh5YnJpZHNPckZuIiwiZ2V0IiwiY29ubmVjdCIsImtleSIsImludmFsaWRhdGUiLCJ0YXJnZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxTQUFTQSxJQUFULENBQWNDLElBQWQsRUFBb0JDLEVBQXBCLEVBQXdCO0FBQ3RCLE1BQUlDLGFBQWEsR0FBR0YsSUFBSSxDQUFDRSxhQUFMLElBQXNCRixJQUFJLENBQUNHLFVBQUwsQ0FBZ0JDLElBQTFEOztBQUVBLFNBQU9GLGFBQVAsRUFBc0I7QUFDcEIsUUFBTUcsT0FBTyxHQUFHSCxhQUFhLENBQUNJLFdBQWQsQ0FBMEJELE9BQTFDOztBQUVBLFFBQUlBLE9BQU8sSUFBSUosRUFBRSxDQUFDSSxPQUFELENBQWpCLEVBQTRCO0FBQzFCLGFBQU9ILGFBQVA7QUFDRDs7QUFFREEsSUFBQUEsYUFBYSxHQUFHQSxhQUFhLENBQUNBLGFBQWQsSUFDVkEsYUFBYSxDQUFDQyxVQUFkLElBQTRCRCxhQUFhLENBQUNDLFVBQWQsQ0FBeUJDLElBRDNEO0FBRUQ7O0FBRUQsU0FBT0YsYUFBYSxJQUFJLElBQXhCO0FBQ0Q7O0FBRWMsU0FBU0ssTUFBVCxDQUFnQkMsV0FBaEIsRUFBNkI7QUFDMUMsTUFBTVAsRUFBRSxHQUFHLE9BQU9PLFdBQVAsS0FBdUIsVUFBdkIsR0FBb0NBLFdBQXBDLEdBQWtELFVBQUFILE9BQU87QUFBQSxXQUFJQSxPQUFPLEtBQUtHLFdBQWhCO0FBQUEsR0FBcEU7QUFDQSxTQUFPO0FBQ0xDLElBQUFBLEdBQUcsRUFBRSxhQUFBTCxJQUFJO0FBQUEsYUFBSUwsSUFBSSxDQUFDSyxJQUFELEVBQU9ILEVBQVAsQ0FBUjtBQUFBLEtBREo7QUFFTFMsSUFBQUEsT0FGSyxtQkFFR04sSUFGSCxFQUVTTyxHQUZULEVBRWNDLFVBRmQsRUFFMEI7QUFDN0IsVUFBTUMsTUFBTSxHQUFHVCxJQUFJLENBQUNPLEdBQUQsQ0FBbkI7O0FBQ0EsVUFBSUUsTUFBSixFQUFZO0FBQ1YsZUFBT0QsVUFBUDtBQUNEOztBQUNELGFBQU8sS0FBUDtBQUNEO0FBUkksR0FBUDtBQVVEIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gd2Fsayhub2RlLCBmbikge1xuICBsZXQgcGFyZW50RWxlbWVudCA9IG5vZGUucGFyZW50RWxlbWVudCB8fCBub2RlLnBhcmVudE5vZGUuaG9zdDtcblxuICB3aGlsZSAocGFyZW50RWxlbWVudCkge1xuICAgIGNvbnN0IGh5YnJpZHMgPSBwYXJlbnRFbGVtZW50LmNvbnN0cnVjdG9yLmh5YnJpZHM7XG5cbiAgICBpZiAoaHlicmlkcyAmJiBmbihoeWJyaWRzKSkge1xuICAgICAgcmV0dXJuIHBhcmVudEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudFxuICAgICAgfHwgKHBhcmVudEVsZW1lbnQucGFyZW50Tm9kZSAmJiBwYXJlbnRFbGVtZW50LnBhcmVudE5vZGUuaG9zdCk7XG4gIH1cblxuICByZXR1cm4gcGFyZW50RWxlbWVudCB8fCBudWxsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJlbnQoaHlicmlkc09yRm4pIHtcbiAgY29uc3QgZm4gPSB0eXBlb2YgaHlicmlkc09yRm4gPT09ICdmdW5jdGlvbicgPyBoeWJyaWRzT3JGbiA6IGh5YnJpZHMgPT4gaHlicmlkcyA9PT0gaHlicmlkc09yRm47XG4gIHJldHVybiB7XG4gICAgZ2V0OiBob3N0ID0+IHdhbGsoaG9zdCwgZm4pLFxuICAgIGNvbm5lY3QoaG9zdCwga2V5LCBpbnZhbGlkYXRlKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBob3N0W2tleV07XG4gICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBpbnZhbGlkYXRlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gIH07XG59XG4iXX0=