{"version":3,"sources":["webpack://hybrids/webpack/universalModuleDefinition","webpack://hybrids/webpack/bootstrap","webpack://hybrids/./src/utils.js","webpack://hybrids/./src/property.js","webpack://hybrids/./src/render.js","webpack://hybrids/./src/emitter.js","webpack://hybrids/./src/cache.js","webpack://hybrids/./src/define.js","webpack://hybrids/./src/parent.js","webpack://hybrids/./src/children.js","webpack://hybrids/./src/template/utils.js","webpack://hybrids/./src/template/resolvers/array.js","webpack://hybrids/./src/template/resolvers/value.js","webpack://hybrids/./src/template/resolvers/event.js","webpack://hybrids/./src/template/resolvers/class.js","webpack://hybrids/./src/template/resolvers/style.js","webpack://hybrids/./src/template/resolvers/property.js","webpack://hybrids/./src/template/core.js","webpack://hybrids/./src/template/helpers.js","webpack://hybrids/./src/template/index.js","webpack://hybrids/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","camelToDashMap","Map","camelToDash","str","result","undefined","replace","toLowerCase","set","dispatch","host","eventType","options","arguments","length","dispatchEvent","CustomEvent","_objectSpread","bubbles","shadyCSS","fn","fallback","shady","ShadyCSS","nativeShadow","stringifyElement","element","tagName","String","concat","IS_IE","Promise","resolve","defaultTransform","v","objectTransform","_typeof","TypeError","freeze","connect","type","transform","Number","Boolean","val","oldValue","invalidate","attrName","hasAttribute","attrValue","getAttribute","render","customOptions","render_typeof","render_objectSpread","shadowRoot","shadowRootInit","assign","attachShadow","observe","targets","WeakMap","getListeners","target","listeners","Set","queue","run","execute","forEach","delete","e","size","requestAnimationFrame","add","entries","getEntry","targetMap","entry","contexts","deps","state","checksum","observed","calculateChecksum","depEntry","dispatchDeep","emitter","context","cb","defaultMethod","compile","Hybrid","descriptors","hybrids","callbacks","keys","config","desc","define_typeof","Array","isArray","Error","parentContext","nextValue","cache","this","newValue","setter","configurable","process","push","clearValue","lastValue","disconnects","defineElement","hybridsOrConstructor","CustomElement","customElements","_HTMLElement","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","apply","_inherits","_wrapNativeSuper","HTMLElement","constructor","list","index","defineMap","elements","reduce","acc","parent","hybridsOrFn","node","parentElement","parentNode","walk","children","deep","nested","items","from","child","observer","MutationObserver","childList","subtree","disconnect","map","dataMap","defaultValue","getTemplateEnd","data","endNode","removeTemplate","nodeType","Node","TEXT_NODE","childNodes","removeChild","startNode","lastNextSibling","nextSibling","arrayMap","movePlaceholder","previousSibling","insertBefore","prevNode","nextNode","resolveValue","value_typeof","textContent","lastEntries","item","id","placeholder","available","ids","filter","has","lastIndex","matchedEntry","document","createTextNode","resolveArray","eventMap","classMap","resolveClassList","previousList","className","class_typeof","normalizeValue","classList","remove","styleMap","resolveStyle","style_typeof","previousMap","nextMap","dashKey","styleValue","style","setProperty","removeProperty","resolveProperty","propertyName","isSVG","substr","removeEventListener","event_typeof","addEventListener","resolveEventListener","resolveStyleList","SVGElement","removeAttribute","setAttribute","TIMESTAMP","Date","now","getPlaceholder","PLACEHOLDER_REGEXP_TEXT","PLACEHOLDER_REGEXP_EQUAL","RegExp","PLACEHOLDER_REGEXP_ALL","ATTR_PREFIX","ATTR_REGEXP","preparedTemplates","createWalker","core_typeof","ShadyDOM","inUse","currentNode","createTreeWalker","NodeFilter","SHOW_ELEMENT","SHOW_TEXT","container","createElement","compileTemplate","rawParts","styles","template","parts","signature","part","slice","join","match","createSignature","innerHTML","content","appendChild","svgRoot","firstChild","fragment","iterator","createNodeIterator","SHOW_COMMENT","test","replaceComments","compileWalker","compileIndex","_loop","text","results","_acc$pop$split2","_slicedToArray","pop","split","before","next","equal","ELEMENT_NODE","attributes","attr","trim","partialName","args","lastArgs","importNode","clone","cloneNode","querySelectorAll","count","prepareTemplate","applyShadyCSS","renderWalker","clonedParts","renderIndex","currentPart","shift","markers","previousChild","_data$markers$index","marker","styleSubtree","styleElement","setCache","_ref","promiseMap","promise","delay","timeout","setTimeout","then","clearTimeout","PLACEHOLDER","SVG_PLACEHOLDER","templatesMap","stylesMap","methods","defineElements","_len","_key","createTemplate","html","_len2","_key2","svg","_len3","_key3","helpers","__webpack_exports__","define_define","parent_parent","render_render"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,IACA,mBAAAG,eAAAC,IACAD,OAAA,GAAAH,GACA,iBAAAC,QACAA,QAAA,QAAAD,IAEAD,EAAA,QAAAC,IARA,CASCK,OAAA,WACD,mBCTA,IAAAC,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAP,QAGA,IAAAC,EAAAI,EAAAE,GAAA,CACAC,EAAAD,EACAE,GAAA,EACAT,QAAA,IAUA,OANAU,EAAAH,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAQ,GAAA,EAGAR,EAAAD,QA0DA,OArDAM,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAtB,GACA,oBAAAuB,eAAAC,aACAN,OAAAC,eAAAnB,EAAAuB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAnB,EAAA,cAAiDyB,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAhC,GACA,IAAAe,EAAAf,KAAA2B,WACA,WAA2B,OAAA3B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAK,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,2PClFA,IAAMC,EAAiB,IAAIC,IACpB,SAASC,EAAYC,GAC1B,IAAIC,EAASJ,EAAenB,IAAIsB,GAKhC,YAJeE,IAAXD,IACFA,EAASD,EAAIG,QAAQ,kBAAmB,SAASC,cACjDP,EAAeQ,IAAIL,EAAKC,IAEnBA,EAOF,SAASK,EAASC,EAAMC,GAAyB,IAAdC,EAAcC,UAAAC,OAAA,QAAAT,IAAAQ,UAAA,GAAAA,UAAA,GAAJ,GAClD,OAAOH,EAAKK,cAAc,IAAIC,YAAYL,oUAAhBM,CAAA,CAA6BC,SAAS,GAAUN,KAGrE,SAASO,EAASC,EAAIC,GAC3B,IAAMC,EAAQ1D,OAAO2D,SAGrB,OAAID,IAAUA,EAAME,aACXJ,EAAGE,GAGLD,EAGF,SAASI,EAAiBC,GAC/B,IAAMC,EAAUC,OAAOF,EAAQC,SAASpB,cACxC,UAAAsB,OAAWF,EAAX,KAGK,IAAMG,EAAQ,kBAAmBlE,OAChBmE,QAAQC,+OCjChC,IAAMC,EAAmB,SAAAC,GAAC,OAAIA,GAExBC,EAAkB,SAAClD,GACvB,GAAqB,WAAjBmD,EAAOnD,GACT,MAAMoD,UAAS,qCAAAR,OAAA,oBAA6CK,EAA7C,YAAAE,EAA6CF,KAE9D,OAAOjD,GAASP,OAAO4D,OAAOrD,IAGjB,SAASU,EAASV,EAAOsD,GACtC,IAAMC,EAAIJ,EAAUnD,GAChBwD,EAAYR,EAEhB,OAAQO,GACN,IAAK,SACHC,EAAYb,OACZ,MACF,IAAK,SACHa,EAAYC,OACZ,MACF,IAAK,UACHD,EAAYE,QACZ,MACF,IAAK,WAEH1D,GADAwD,EAAYxD,KAEZ,MACF,IAAK,SACCA,GAAOP,OAAO4D,OAAOrD,GACzBwD,EAAYN,EAKhB,MAAO,CACLtD,IAAK,SAAC6B,GAAD,OAAAG,UAAAC,OAAA,QAAAT,IAAAQ,UAAA,GAAAA,UAAA,GAAa5B,GAClBuB,IAAK,SAACE,EAAMkC,EAAKC,GAAZ,OAAyBJ,EAAUG,EAAKC,IAC7CN,QAAkB,WAATC,GAA8B,cAATA,EAC1B,SAAC9B,EAAMnB,EAAKuD,GACZ,GAAIpC,EAAKnB,KAASN,EAAO,CACvB,IAAM8D,EAAW7C,EAAYX,GAE7B,GAAImB,EAAKsC,aAAaD,GAAW,CAC/B,IAAME,EAAYvC,EAAKwC,aAAaH,GACpCrC,EAAKnB,GAAqB,KAAd0D,GAAmBA,GAInC,OAAOV,GAAWA,EAAQ7B,EAAMnB,EAAKuD,IAErCP,gWCpDO,SAASY,EAAOtE,GAAyB,IAApBuE,EAAoBvC,UAAAC,OAAA,QAAAT,IAAAQ,UAAA,GAAAA,UAAA,GAAJ,GAClD,GAAmB,mBAARhC,EACT,MAAMwD,UAAS,0CAAAR,OAAAwB,EAAkDxE,KAGnE,IAAM+B,oUAAU0C,CAAA,CAAEC,YAAY,GAASH,GACjCI,EAAiB,CAAErE,KAAM,QAM/B,MAJkC,WAA9BkE,EAAOzC,EAAQ2C,aACjB7E,OAAO+E,OAAOD,EAAgB5C,EAAQ2C,YAGjC,CACL1E,IADK,SACD6B,GACF,IAAMU,EAAKvC,EAAI6B,GACf,OAAO,WACLU,EAAGV,EAAME,EAAQ2C,WAAa7C,EAAK6C,WAAa7C,KAGpD6B,QAPK,SAOG7B,GACFE,EAAQ2C,aAAe7C,EAAK6C,YAC9B7C,EAAKgD,aAAaF,IAGtBG,QAZK,SAYGjD,EAAMU,GACZA,MCzBN,IAAMwC,EAAU,IAAIC,QAEpB,SAASC,EAAaC,GACpB,IAAIC,EAAYJ,EAAQ/E,IAAIkF,GAK5B,OAJKC,IACHA,EAAY,IAAIC,IAChBL,EAAQpD,IAAIuD,EAAQC,IAEfA,EAGT,IAAME,EAAQ,IAAID,IACZE,EAAM,SAAA/C,GAAE,OAAIA,KAElB,SAASgD,IACP,IACEF,EAAMG,QAAQ,SAACN,GACb,IACED,EAAaC,GAAQM,QAAQF,GAC7BD,EAAMI,OAAOP,GACb,MAAOQ,GAEP,MADAL,EAAMI,OAAOP,GACPQ,KAGV,MAAOA,GAEP,MADIL,EAAMM,MAAMJ,IACVG,GAIH,SAAS9D,EAASsD,GAClBG,EAAMM,MACTC,sBAAsBL,GAExBF,EAAMQ,IAAIX,GChCZ,IAAMY,EAAU,IAAId,QACb,SAASe,EAASb,EAAQxE,GAC/B,IAAIsF,EAAYF,EAAQ9F,IAAIkF,GACvBc,IACHA,EAAY,IAAI5E,IAChB0E,EAAQnE,IAAIuD,EAAQc,IAGtB,IAAIC,EAAQD,EAAUhG,IAAIU,GAgB1B,OAdKuF,IACHA,EAAQ,CACNf,SACAxE,MACAN,WAAOoB,EACP0E,cAAU1E,EACV2E,UAAM3E,EACN4E,MAAO,EACPC,SAAU,EACVC,UAAU,GAEZN,EAAUrE,IAAIjB,EAAKuF,IAGdA,EAGT,SAASM,EAAkBN,GACzB,IAAII,EAAWJ,EAAMG,MASrB,OARIH,EAAME,MACRF,EAAME,KAAKX,QAAQ,SAACgB,GAElBA,EAAStB,OAAOsB,EAAS9F,KACzB2F,GAAYG,EAASJ,QAIlBC,EAGT,SAASI,EAAaR,GAChBA,EAAMK,UAAUI,EAAiBT,GACjCA,EAAMC,UAAUD,EAAMC,SAASV,QAAQiB,GAG7C,IAAIE,EAAU,KAuFP,SAAS7B,EAAQI,EAAQxE,EAAK6B,GACnC,IAAM0D,EAAQF,EAASb,EAAQxE,GAE/B,OADAuF,EAAMK,UAAW,EDnGZ,SAAmBpB,EAAQ0B,GAChC,IAAMzB,EAAYF,EAAaC,GAI/B,OAHAC,EAAUU,IAAIe,GACdhF,EAASsD,GAEF,kBAAMC,EAAUM,OAAOmB,IC+FvBF,CAAkBT,EAAO1D,4sDCjIlC,IAAMsE,EAAgB,SAAChF,EAAMzB,GAAP,OAAiBA,GAEvC,SAAS0G,EAAQC,EAAQC,GACvBD,EAAOE,QAAUD,EACjBD,EAAOG,UAAY,GAEnBrH,OAAOsH,KAAKH,GAAaxB,QAAQ,SAAC9E,GAChC,IAGI0G,EAHEC,EAAOL,EAAYtG,GACnBiD,EAAO2D,EAAOD,GAKlBD,EADW,aAATzD,EACe,WAARjD,EAAmB4D,EAAO+C,GAAQ,CAAErH,IAAKqH,GAChC,WAAT1D,GAA8B,OAAT0D,GAAkBE,MAAMC,QAAQH,GACrDvG,EAASuG,GAET,CACPrH,IAAKqH,EAAKrH,KAAO6G,EACjBlF,IAAK0F,EAAK1F,MAAS0F,EAAKrH,KAAO6G,QAAkBrF,EACjDkC,QAAS2D,EAAK3D,QACdoB,QAASuC,EAAKvC,SAIlBjF,OAAOC,eAAeiH,EAAOhG,UAAWL,EAAK,CAC3CV,IAAK,WACH,ODaD,SAAakF,EAAQxE,EAAKf,GAC/B,IAAMsG,EAAQF,EAASb,EAAQxE,GAE/B,GAAIiG,IAAYV,EAEd,MADAU,EAAU,KACJc,MAAK,aAAAzE,OAActC,EAAd,yBAAAsC,OAAyCJ,EAAiBsC,GAA1D,MAGTyB,IACFA,EAAQR,KAAOQ,EAAQR,MAAQ,IAAIf,IACnCuB,EAAQR,KAAKN,IAAII,IAGfU,IAAYA,EAAQL,UAAaK,EAAQT,UAAYS,EAAQT,SAASP,QACxEM,EAAMC,SAAWD,EAAMC,UAAY,IAAId,IACvCa,EAAMC,SAASL,IAAIc,IAGrB,IAAMe,EAAgBf,EAGtB,GAFAA,EAAUV,EAENA,EAAMI,UAAYJ,EAAMI,WAAaE,EAAkBN,GAEzD,OADAU,EAAUe,EACHzB,EAAM7F,MAGX6F,EAAME,MAAQF,EAAME,KAAKR,OAC3BM,EAAME,KAAKX,QAAQ,SAACgB,GACdA,EAASN,UAAUM,EAASN,SAAST,OAAOQ,KAElDA,EAAME,UAAO3E,GAGf,IACE,IAAMmG,EAAYhI,EAAOuF,EAAQe,EAAM7F,OAEnCuH,IAAc1B,EAAM7F,QACtB6F,EAAMG,OAAS,EACfH,EAAM7F,MAAQuH,EAEdlB,EAAaR,IAGfA,EAAMI,SAAWE,EAAkBN,GACnCU,EAAUe,EACV,MAAOhC,GAEP,MADAiB,EAAU,KACJjB,EAGR,OAAOO,EAAM7F,MC/DAwH,CAAUC,KAAMnH,EAAK0G,EAAOpH,MAErC2B,IAAKyF,EAAOzF,KAAO,SAAamG,IDgE/B,SAAa5C,EAAQxE,EAAKqH,EAAQ3H,GACvC,GAAIuG,EAEF,MADAA,EAAU,KACJc,MAAK,eAAAzE,OAAgBtC,EAAhB,UAAAsC,OAA4BJ,EAAiBsC,GAA7C,kBAGb,IAAMe,EAAQF,EAASb,EAAQxE,GACzBoH,EAAWC,EAAO7C,EAAQ9E,EAAO6F,EAAM7F,OAEzC0H,IAAa7B,EAAM7F,QACrB6F,EAAMG,OAAS,EACfH,EAAM7F,MAAQ0H,EAEdrB,EAAaR,IC5ET2B,CAAUC,KAAMnH,EAAK0G,EAAOzF,IAAKmG,IAEnC/H,YAAY,EACZiI,cAAcC,IAGZb,EAAO1D,SACTqD,EAAOG,UAAUgB,KAAK,SAAArG,GAAI,OAAIuF,EAAO1D,QAAQ7B,EAAMnB,EAAK,YDyEvD,SAAoBwE,EAAQxE,EAAKyH,GACtC,GAAIxB,EAEF,MADAA,EAAU,KACJc,MAAK,sBAAAzE,OAAuBtC,EAAvB,UAAAsC,OAAmCJ,EAAiBsC,GAApD,eAGb,IAAMe,EAAQF,EAASb,EAAQxE,GAE/BuF,EAAMI,SAAW,EACjBI,EAAaR,GAETkC,IACFlC,EAAM7F,WAAQoB,GCpFVoG,CAAiB/F,EAAMnB,OAIvB0G,EAAOtC,SACTiC,EAAOG,UAAUgB,KAAK,SAACrG,GACrB,IAAIuG,EACJ,OAAOR,EAAc/F,EAAMnB,EAAK,WAC9B,IAAMN,EAAQyB,EAAKnB,GACfN,IAAUgI,IACZhB,EAAOtC,QAAQjD,EAAMzB,EAAOgI,GAC5BA,EAAYhI,SA8CxB,IAAMiI,EAAc,IAAIrD,QAExB,SAASsD,EAAcxF,EAASyF,GAC9B,IAAM5E,EAAO2D,EAAOiB,GACpB,GAAa,WAAT5E,GAA8B,aAATA,EACvB,MAAMH,UAAS,oDAAAR,OAAqDW,IAGtE,IAAM6E,EAAgBzJ,OAAO0J,eAAezI,IAAI8C,GAEhD,GAAa,aAATa,EACF,OAAI6E,IAAkBD,EACbxJ,OAAO0J,eAAe5J,OAAOiE,EAASyF,GAExCC,EAGT,GAAIA,EAAe,CACjB,GAAIA,EAAcvB,UAAYsB,EAC5B,OAAOC,EAeT,MAAMf,MAAK,YAAAzE,OAAaF,EAAb,sBAhCuC,IAmC9CiE,EAnC8C,SAAA2B,GAAA,SAAA3B,IAAA,mGAAA4B,CAAAd,KAAAd,GAAA6B,EAAAf,KAAAgB,EAAA9B,GAAA+B,MAAAjB,KAAA7F,sBAAA,yOAAA+G,CAAAhC,EAAAiC,EAmC/BC,gBAnC+BlC,IAAA,EAAArG,IAAA,OAAAV,IAAA,WAoC9B,OAAO8C,QApCuB,EAAApC,IAAA,oBAAAN,MAAA,WA0ChD,IAJkB,IACV8G,EAAcW,KAAKqB,YAAnBhC,UACFiC,EAAO,GAEJC,EAAQ,EAAGA,EAAQlC,EAAUjF,OAAQmH,GAAS,EAAG,CACxD,IAAMxC,EAAKM,EAAUkC,GAAOvB,MACxBjB,GAAIuC,EAAKjB,KAAKtB,GAGpByB,EAAY1G,IAAIkG,KAAMsB,KA/C0B,CAAAzI,IAAA,uBAAAN,MAAA,WAoDhD,IADA,IAAM+I,EAAOd,EAAYrI,IAAI6H,MACpBuB,EAAQ,EAAGA,EAAQD,EAAKlH,OAAQmH,GAAS,EAChDD,EAAKC,qCArDyCrC,EAAA,GA6DpD,OAHAD,EAAQC,EAAQwB,GAChBE,eAAe5J,OAAOiE,EAASiE,GAExBA,EAGT,SAASsC,EAAUC,GACjB,OAAOzJ,OAAOsH,KAAKmC,GAAUC,OAAO,SAACC,EAAK9I,GACxC,IAAMoC,ELjKDzB,EKiKwBX,ELjKRe,QAAQ,2BAA4B,QKoKzD,OAFA+H,EAAI9I,GAAO4H,EAAcxF,EAASwG,EAAS5I,IAEpC8I,GACN,IAGU,SAAS3K,IACtB,MAAuB,WAAnByI,EAAAtF,UAAAC,QAAA,OAAAT,EAAAQ,UAAA,IACKqH,EAASrH,UAAAC,QAAA,OAAAT,EAAAQ,UAAA,IAGXsG,EAAaQ,WAAb,EAAA9G,WCvKM,SAASyH,EAAOC,GAC7B,IAAMnH,EAA4B,mBAAhBmH,EAA6BA,EAAc,SAAAzC,GAAO,OAAIA,IAAYyC,GACpF,MAAO,CACL1J,IAAK,SAAA6B,GAAI,OApBb,SAAc8H,EAAMpH,GAGlB,IAFA,IAAIqH,EAAgBD,EAAKC,eAAiBD,EAAKE,WAAWhI,KAEnD+H,GAAe,CACpB,IAAM3C,EAAU2C,EAAcV,YAAYjC,QAE1C,GAAIA,GAAW1E,EAAG0E,GAChB,OAAO2C,EAGTA,EAAgBA,EAAcA,eACxBA,EAAcC,YAAcD,EAAcC,WAAWhI,KAG7D,OAAO+H,GAAiB,KAMTE,CAAKjI,EAAMU,IACxBmB,QAFK,SAEG7B,EAAMnB,EAAKuD,GAEjB,QADepC,EAAKnB,IAEXuD,ICRA,SAAS8F,EAASL,GAAuD,IAA1C3H,EAA0CC,UAAAC,OAAA,QAAAT,IAAAQ,UAAA,GAAAA,UAAA,GAAhC,CAAEgI,MAAM,EAAOC,QAAQ,GACvE1H,EAA4B,mBAAhBmH,EAA6BA,EAAc,SAAAzC,GAAO,OAAIA,IAAYyC,GACpF,MAAO,CACL1J,IADK,SACD6B,GAAQ,OAnBhB,SAASiI,EAAKH,EAAMpH,EAAIR,GAAqB,IAAZmI,EAAYlI,UAAAC,OAAA,QAAAT,IAAAQ,UAAA,GAAAA,UAAA,GAAJ,GAavC,OAZAuF,MAAM4C,KAAKR,EAAKI,UAAUvE,QAAQ,SAAC4E,GACjC,IAAMnD,EAAUmD,EAAMlB,YAAYjC,QAC9BA,GAAW1E,EAAG0E,IAChBiD,EAAMhC,KAAKkC,GACPrI,EAAQiI,MAAQjI,EAAQkI,QAC1BH,EAAKM,EAAO7H,EAAIR,EAASmI,IAElBnI,EAAQiI,MACjBF,EAAKM,EAAO7H,EAAIR,EAASmI,KAItBA,EAMcJ,CAAKjI,EAAMU,EAAIR,IAClC2B,QAFK,SAEG7B,EAAMnB,EAAKuD,GACjB,IAAMoG,EAAW,IAAIC,iBAAiBrG,GAMtC,OAJAoG,EAASvF,QAAQjD,EAAM,CACrB0I,WAAW,EAAMC,UAAWzI,EAAQiI,OAG/B,WAAQK,EAASI,gBC3B9B,IAAMC,EAAM,IAAI1F,QACH2F,EAAU,CACrB3K,IADqB,SACjBU,EAAKkK,GACP,IAAMxK,EAAQsK,EAAI1K,IAAIU,GACtB,OAAIN,IAEAwK,GACFF,EAAI/I,IAAIjB,EAAKkK,GAGRA,IAETjJ,IAXqB,SAWjBjB,EAAKN,GAEP,OADAsK,EAAI/I,IAAIjB,EAAKN,GACNA,IAIJ,SAASyK,EAAelB,GAG7B,IAFA,IAAImB,EAEGnB,IAASmB,EAAOH,EAAQ3K,IAAI2J,KAAUmB,EAAKC,SAChDpB,EAAOmB,EAAKC,QAGd,OAAOpB,EAGF,SAASqB,EAAe9F,GAC7B,GAAIA,EAAO+F,WAAaC,KAAKC,UAE3B,IADA,IAAIf,EAAQlF,EAAOkG,WAAW,GACvBhB,GACLlF,EAAOmG,YAAYjB,GACnBA,EAAQlF,EAAOkG,WAAW,OAEvB,CACL,IAAMN,EAAOH,EAAQ3K,IAAIkF,GAEzB,GAAI4F,EAAKQ,UAMP,IALA,IAAMP,EAAUF,EAAeC,EAAKC,SAEhCpB,EAAOmB,EAAKQ,UACVC,EAAkBR,EAAQS,YAEzB7B,GAAM,CACX,IAAM6B,EAAc7B,EAAK6B,YACzB7B,EAAKE,WAAWwB,YAAY1B,GAC5BA,EAAO6B,IAAgBD,GAAmBC,ICxC3C,IAAMC,EAAW,IAAIzG,QAE5B,SAAS0G,EAAgBxG,EAAQyG,GAC/B,IAAMb,EAAOH,EAAQ3K,IAAIkF,GACnBoG,EAAYR,EAAKQ,UACjBP,EAAUF,EAAeC,EAAKC,SAEpCY,EAAgB9B,WAAW+B,aAAa1G,EAAQyG,EAAgBH,aAIhE,IAFA,IAAIK,EAAW3G,EACXyE,EAAO2B,EACJ3B,GAAM,CACX,IAAMmC,EAAWnC,EAAK6B,YACtBK,EAAShC,WAAW+B,aAAajC,EAAMkC,EAASL,aAChDK,EAAWlC,EACXA,EAAOmC,IAAaf,EAAQS,aAAeM,wOClBhC,SAASC,EAAalK,EAAMqD,EAAQ9E,GACjD,IAAMuD,EAAO4D,MAAMC,QAAQpH,GAAS,QAAvB4L,EAAwC5L,GACjD0K,EAAOH,EAAQ3K,IAAIkF,EAAQ,IAa/B,OAXI4F,EAAKnH,OAASA,IAChBqH,EAAe9F,GACF,UAATvB,GAAkB8H,EAAShG,OAAOP,GAEtC4F,EAAOH,EAAQhJ,IAAIuD,EAAQ,CAAEvB,SAEF,KAAvBuB,EAAO+G,cACT/G,EAAO+G,YAAc,KAIjBtI,GACN,IAAK,WACHvD,EAAMyB,EAAMqD,GACZ,MACF,IAAK,SDGM,SAAsBrD,EAAMqD,EAAQ9E,GACjD,IAAI8L,EAAcT,EAASzL,IAAIkF,GACzBY,EAAU1F,EAAMsK,IAAI,SAACyB,EAAM/C,GAAP,MAAkB,CAC1CgD,GAAIvM,OAAOkB,UAAUC,eAAe1B,KAAK6M,EAAM,MAAQA,EAAKC,GAAKhD,EACjEhJ,MAAO+L,EACPE,YAAa,KACbC,WAAW,KAKb,GAFAb,EAAS9J,IAAIuD,EAAQY,GAEjBoG,EAAa,CACf,IAAMK,EAAM,IAAInH,IAChBU,EAAQN,QAAQ,SAAAS,GAAK,OAAIsG,EAAI1G,IAAII,EAAMmG,MAEvCF,EAAcA,EAAYM,OAAO,SAACvG,GAChC,QAAKsG,EAAIE,IAAIxG,EAAMmG,MACjBpB,EAAe/E,EAAMoG,aACrBpG,EAAMoG,YAAYxC,WAAWwB,YAAYpF,EAAMoG,cACxC,KAWb,IAJA,IAAIV,EAAkBzG,EAChBwH,EAAYtM,EAAM6B,OAAS,EAC3B6I,EAAOH,EAAQ3K,IAAIkF,GAEhBkE,EAAQ,EAAGA,EAAQtD,EAAQ7D,OAAQmH,GAAS,EAAG,CACtD,IAAMnD,EAAQH,EAAQsD,GAClBuD,OAAY,EAChB,GAAIT,EACF,IAAK,IAAI/M,EAAI,EAAGA,EAAI+M,EAAYjK,OAAQ9C,GAAK,EAC3C,GAAI+M,EAAY/M,GAAGmN,WAAaJ,EAAY/M,GAAGiN,KAAOnG,EAAMmG,GAAI,CAC9DO,EAAeT,EAAY/M,GAC3B,MAKN,IAAIkN,OAAW,EACXM,GACFA,EAAaL,WAAY,GACzBD,EAAcM,EAAaN,aAEXV,kBAAoBA,GAClCD,EAAgBW,EAAaV,GAE3BgB,EAAavM,QAAU6F,EAAM7F,OAC/B2L,EAAalK,EAAMwK,EAAapG,EAAM7F,SAGxCiM,EAAcO,SAASC,eAAe,IACtClB,EAAgB9B,WAAW+B,aAAaS,EAAaV,EAAgBH,aACrEO,EAAalK,EAAMwK,EAAapG,EAAM7F,QAGxCuL,EAAkBd,EAAeF,EAAQ3K,IAAIqM,GAAatB,SAAWsB,GAEvD,IAAVjD,IAAa0B,EAAKQ,UAAYe,GAC9BjD,IAAUsD,IAAW5B,EAAKC,QAAUY,GAExC1F,EAAMoG,YAAcA,EAGlBH,GACFA,EAAY1G,QAAQ,SAACS,GACfA,EAAMqG,YACRtB,EAAe/E,EAAMoG,aACrBpG,EAAMoG,YAAYxC,WAAWwB,YAAYpF,EAAMoG,gBCzEjDS,CAAajL,EAAMqD,EAAQ9E,GAC3B,MACF,QACE8E,EAAO+G,YAAuB,WAATtI,GAAqBvD,EAAQA,EAAQ,2OC3BhE,IAAM2M,GAAW,IAAI/H,+OCYrB,IAAMgI,GAAW,IAAIhI,QAEN,SAASiI,GAAiBpL,EAAMqD,EAAQ9E,GACrD,IAAM8M,EAAeF,GAAShN,IAAIkF,IAAW,IAAIE,IAC3C+D,EAhBR,SAAwB/I,GAAwB,IAAjBuB,EAAiBK,UAAAC,OAAA,QAAAT,IAAAQ,UAAA,GAAAA,UAAA,GAAX,IAAIoD,IASvC,OARImC,MAAMC,QAAQpH,GAChBA,EAAMoF,QAAQ,SAAA2H,GAAS,OAAIxL,EAAIkE,IAAIsH,KAChB,OAAV/M,GAAmC,WAAjBgN,GAAOhN,GAClCP,OAAOsH,KAAK/G,GAAOoF,QAAQ,SAAA9E,GAAG,OAAIN,EAAMM,IAAQiB,EAAIkE,IAAInF,KAExDiB,EAAIkE,IAAIzF,GAGHuB,EAOM0L,CAAejN,GAE5B4M,GAASrL,IAAIuD,EAAQiE,GAErBA,EAAK3D,QAAQ,SAAC2H,GACZjI,EAAOoI,UAAUzH,IAAIsH,GACrBD,EAAazH,OAAO0H,KAGtBD,EAAa1H,QAAQ,SAAC2H,GACpBjI,EAAOoI,UAAUC,OAAOJ,4OCxB5B,IAAMK,GAAW,IAAIxI,QAEN,SAASyI,GAAa5L,EAAMqD,EAAQ9E,GACjD,GAAc,OAAVA,GAAmC,WAAjBsN,GAAOtN,GAC3B,MAAMoD,UAAS,oCAAAR,OAAqCJ,EAAiBsC,GAAtD,KAAkE9E,GAGnF,IAAMuN,EAAcH,GAASxN,IAAIkF,IAAW,IAAI9D,IAE1CwM,EAAU/N,OAAOsH,KAAK/G,GAAOmJ,OAAO,SAACmB,EAAKhK,GAC9C,IAAMmN,EAAUxM,EAAYX,GACtBoN,EAAa1N,EAAMM,GAWzB,OATKoN,GAA6B,IAAfA,EAGjB5I,EAAO6I,MAAMC,YAAYH,EAASC,GAFlC5I,EAAO6I,MAAME,eAAeJ,GAK9BnD,EAAI/I,IAAIkM,EAASC,GACjBH,EAAYlI,OAAOoI,GAEZnD,GACN,IAAItJ,KAEPuM,EAAYnI,QAAQ,SAACsI,EAAYpN,GAAUwE,EAAO6I,MAAMrN,GAAO,KAE/D8M,GAAS7L,IAAIuD,EAAQ0I,GCzBR,SAASM,GAAgBhK,EAAUiK,EAAcC,GAC9D,GAAkC,OAA9BD,EAAaE,OAAO,EAAG,GAEzB,OHLW,SAA8BvM,GAC3C,OAAO,SAACD,EAAMqD,EAAQ9E,EAAOgI,GAS3B,GARIA,GACFlD,EAAOoJ,oBACLxM,EACAiL,GAAS/M,IAAIoI,QACS5G,IAAtB4G,EAAUrG,SAAwBqG,EAAUrG,SAI5C3B,EAAO,CACT,GAAqB,mBAAVA,EACT,MAAMqH,MAAK,sCAAAzE,OAAAuL,GAA8CnO,KAG3D2M,GAASpL,IAAIvB,EAAOA,EAAMO,KAAK,KAAMkB,IAErCqD,EAAOsJ,iBACL1M,EACAiL,GAAS/M,IAAII,QACKoB,IAAlBpB,EAAM2B,SAAwB3B,EAAM2B,WGfjC0M,CADWN,EAAaE,OAAO,IAIxC,OAAQnK,GACN,IAAK,QAAS,OAAO+I,GACrB,IAAK,QAAS,OAAOyB,GACrB,QACE,OAAO,SAAC7M,EAAMqD,EAAQ9E,GACpB,GAAKgO,GAAWlJ,aAAkByJ,cAAgBR,KAAgBjJ,GAI3D,IAAc,IAAV9E,SAAmBA,EAC5B8E,EAAO0J,gBAAgB1K,OAClB,CACL,IAAME,GAAsB,IAAVhE,EAAiB,GAAK2C,OAAO3C,GAC/C8E,EAAO2J,aAAa3K,EAAUE,QAP1Bc,EAAOiJ,KAAkB/N,IAC3B8E,EAAOiJ,GAAgB/N,+nBCRnC,IAAM0O,GAAYC,KAAKC,MAEVC,GAAiB,eAAC7C,EAADpK,UAAAC,OAAA,QAAAT,IAAAQ,UAAA,GAAAA,UAAA,GAAM,EAAN,aAAAgB,OAAmB8L,GAAnB,KAAA9L,OAAgCoJ,EAAhC,OAExB8C,GAA0BD,GAAe,UACzCE,GAA2B,IAAIC,OAAJ,IAAApM,OAAekM,GAAf,MAC3BG,GAAyB,IAAID,OAAOF,GAAyB,KAE7DI,GAAW,KAAAtM,OAAQ8L,GAAR,MACXS,GAAc,IAAIH,OAAOE,GAAa,KAEtCE,GAAoB,IAAIxK,QA+G9B,IAAMyK,GAA0C,WAA3BC,GAAO3Q,OAAO4Q,WAAyB5Q,OAAO4Q,SAASC,MAhCrE,SAA8BjJ,GACnC,IAAIgD,EAEJ,MAAO,CACLkG,kBAAoB,OAAOlG,GAC3BmC,SAFK,WAaH,SATEnC,OADWnI,IAATmI,EACKhD,EAAQyE,WAAW,GACjBzB,EAAKyB,WAAWnJ,OAClB0H,EAAKyB,WAAW,GACdzB,EAAK6B,YACP7B,EAAK6B,YAEL7B,EAAKE,WAAW2B,gBAQ/B,SAA8B7E,GAC5B,OAAOiG,SAASkD,iBACdnJ,EAEAoJ,WAAWC,aAAeD,WAAWE,UACrC,MACA,IAOEC,GAAYtD,SAASuD,cAAc,OAClC,SAASC,GAAgBC,EAAUjC,EAAOkC,GAC/C,IAAMC,EAAW3D,SAASuD,cAAc,YAClCK,EAAQ,GAEVC,EAlFN,SAAyBD,EAAOF,GAC9B,IAAIG,EAAYD,EAAMjH,OAAO,SAACC,EAAKkH,EAAMtH,GACvC,OAAc,IAAVA,EACKsH,EAGLF,EAAMG,MAAMvH,GAAOwH,KAAK,IAAIC,MAAM,oDACpC,GAAA7N,OAAUwG,EAAV,WAAAxG,OAAoBiM,GAAe7F,EAAQ,GAA3C,UAAApG,OAAmD0N,GAE9ClH,EAAMyF,GAAe7F,EAAQ,GAAKsH,GACxC,IAOH,OALIJ,IACFG,GAAS,YAAAzN,OAAgBsN,EAAOM,KAAK,kBAA5B,eAIP3N,EACKwN,EAAUhP,QACf,sDACA,SAAAoP,GAAK,SAAA7N,OAAOsM,IAAPtM,OAAqB6N,KAIvBJ,EA0DSK,CAAgBT,EAAUC,GAW1C,GAVIlC,IAAOqC,EAAS,QAAAzN,OAAWyN,EAAX,WAGhBxN,EACFsN,EAASQ,UAAYN,GAErBP,GAAUa,UAAV,aAAA/N,OAAmCyN,EAAnC,eACAF,EAASS,QAAQC,YAAYf,GAAUnG,SAAS,GAAGiH,UAGjD5C,EAAO,CACT,IAAM8C,EAAUX,EAASS,QAAQG,WACjCZ,EAASS,QAAQ3F,YAAY6F,GAC7B3J,MAAM4C,KAAK+G,EAAQ9F,YAAY5F,QAAQ,SAAAmE,GAAI,OAAI4G,EAASS,QAAQC,YAAYtH,MAjEhF,SAAyByH,GAIvB,IAHA,IACIzH,EADE0H,EAAWzE,SAAS0E,mBAAmBF,EAAUrB,WAAWwB,aAAc,MAAM,GAG/E5H,EAAO0H,EAASvF,YACjBqD,GAAyBqC,KAAK7H,EAAKsC,eACrCtC,EAAKE,WAAW+B,aAAagB,SAASC,eAAelD,EAAKsC,aAActC,GACxEA,EAAKE,WAAWwB,YAAY1B,IA6DhC8H,CAAgBlB,EAASS,SAKzB,IAHA,IAAMU,EAAgBjC,GAAac,EAASS,SACxCW,EAAe,EAxBoCC,EAAA,WA2BrD,IAAMjI,EAAO+H,EAAc7B,YAE3B,GAAIlG,EAAKsB,WAAaC,KAAKC,UAAW,CACpC,IAAM0G,EAAOlI,EAAKsC,YAElB,IAAK4F,EAAKhB,MAAM1B,IAA2B,CACzC,IAAM2C,EAAUD,EAAKhB,MAAMxB,IAC3B,GAAIyC,EAAS,CACX,IAAIjC,EAAclG,EAClBmI,EACGvI,OAAO,SAACC,EAAK6C,GAAgB,IAAA0F,EAAAC,GACLxI,EAAIyI,MAAMC,MAAM7F,GADX,GACrB8F,EADqBJ,EAAA,GACbK,EADaL,EAAA,GAK5B,OAHII,GAAQ3I,EAAItB,KAAKiK,GACrB3I,EAAItB,KAAKmE,GACL+F,GAAM5I,EAAItB,KAAKkK,GACZ5I,GACN,CAACqI,IACHrM,QAAQ,SAACkL,EAAMtH,GACA,IAAVA,EACFyG,EAAY5D,YAAcyE,EAE1Bb,EAAcA,EAAYhG,WACvB+B,aAAagB,SAASC,eAAe6D,GAAOb,EAAYrE,gBAMrE,IAAM6G,EAAQ1I,EAAKsC,YAAY4E,MAAM1B,IACjCkD,IAEGpP,IAAO0G,EAAKsC,YAAc,IAC/BuE,EAAM6B,EAAM,IAAM,CAACV,EAAc5F,SAI/BpC,EAAKsB,WAAaC,KAAKoH,cACzB/K,MAAM4C,KAAKR,EAAK4I,YAAY/M,QAAQ,SAACgN,GACnC,IAAMpS,EAAQoS,EAAKpS,MAAMqS,OAEnB/S,EAAOuD,EAAQuP,EAAK9S,KAAK+B,QAAQ6N,GAAa,IAAMkD,EAAK9S,KACzD2S,EAAQjS,EAAMyQ,MAAM1B,IAC1B,GAAIkD,EAAO,CACT,IAAMlE,EAA+BkC,EAASgC,EAAM,IAxHhD5Q,QAAQ,iBAAkB,IAAIyQ,MAAM,KAAKD,MAyH7CzB,EAAM6B,EAAM,IAAM,CAACV,EAAczD,GAAgBxO,EAAMyO,EAAcC,IACrEzE,EAAKiF,gBAAgB4D,EAAK9S,UACrB,CACL,IAAMoS,EAAU1R,EAAMyQ,MAAMxB,IAC5B,GAAIyC,EAAS,CACX,IAAMY,EAAW,SAAA1P,OAAYtD,GAE7BoS,EAAQtM,QAAQ,SAAC6G,EAAajD,GAAU,IAC7BgD,EAD6B4F,GACvB3F,EAAYwE,MAAM1B,IADK,MAEtCqB,EAAMpE,GAAM,CAACuF,EAAc,SAAC9P,EAAMqD,EAAQd,GACxC,IAAM0G,EAAOH,EAAQ3K,IAAIkF,EAAQ,IACjC4F,EAAK4H,IAAgB5H,EAAK4H,IAAgBtS,GAAOqB,QAAQ4K,EAA0B,MAAbjI,EAAoB,GAAKA,GAEvE,IAAnB0N,EAAQ7P,QAAkBmH,EAAQ,IAAM0I,EAAQ7P,SACnDiD,EAAO2J,aAAanP,EAAMoL,EAAK4H,IAC/B5H,EAAK4H,QAAelR,OAK1BgR,EAAKpS,MAAQ,GAGT6C,GAASvD,IAAS8S,EAAK9S,OACzBiK,EAAKiF,gBAAgB4D,EAAK9S,MAC1BiK,EAAKkF,aAAanP,EAAM,SAQpCiS,GAAgB,GA9EXD,EAAc5F,YAAY8F,IAiFjC,OAAO,SAAgC/P,EAAMqD,EAAQyN,GACnD,IAAM7H,EAAOH,EAAQ3K,IAAIkF,EAAQ,CAAEvB,KAAM,aAEzC,GAAI4M,IAAazF,EAAKyF,SAAU,EAC1BzF,EAAKyF,UAAYrL,EAAO+F,WAAaC,KAAKoH,eAActH,EAAe9F,GAC3E4F,EAAK8H,SAAW,KAEhB,IAAMxB,EAAWxE,SAASiG,WAjOhC,SAAuBtC,EAAUzN,GAC/B,OAAKA,EAEER,EAAS,SAACG,GACf,IAAIiI,EAAM8E,GAAkBxP,IAAIuQ,GAC3B7F,IACHA,EAAM,IAAItJ,IACVoO,GAAkB7N,IAAI4O,EAAU7F,IAGlC,IAAIoI,EAAQpI,EAAI1K,IAAI8C,GAEpB,IAAKgQ,EAAO,EACVA,EAAQlG,SAASuD,cAAc,aACzBa,QAAQC,YAAYV,EAASS,QAAQ+B,WAAU,IAErDrI,EAAI/I,IAAImB,EAASgQ,GAEjB,IAAMxC,EAASwC,EAAM9B,QAAQgC,iBAAiB,SAE9CzL,MAAM4C,KAAKmG,GAAQ9K,QAAQ,SAACuI,GAE1B,IADA,IAAMkF,EAAQlF,EAAM3C,WAAWnJ,OAAS,EAC/B9C,EAAI,EAAGA,EAAI8T,EAAO9T,GAAK,EAC9B4O,EAAMlE,WAAW+B,aAAagB,SAASC,eAAeoC,MAAmBlB,KAI7EtL,EAAMyQ,gBAAgBJ,EAAOhQ,EAAQpB,eAEvC,OAAOoR,GACNvC,GA7BkBA,EAgOoB4C,CAAc5C,EAAU1O,EAAKiB,SAASkO,SAAS,GAE9EoC,EAAe3D,GAAa2B,GAC5BiC,EAAc7C,EAAMG,MAAM,GAE5B2C,EAAc,EACdC,EAAcF,EAAYG,QAExBC,EAAU,GAKhB,IAHA3I,EAAKyF,SAAWA,EAChBzF,EAAK2I,QAAUA,EAERL,EAAatH,YAAY,CAC9B,IAAMnC,EAAOyJ,EAAavD,YAe1B,IAbIlG,EAAKsB,WAAaC,KAAKC,YAErBgE,GAAyBqC,KAAK7H,EAAKsC,aACrCtC,EAAKsC,YAAc,GACVhJ,IACT0G,EAAKsC,YAActC,EAAKsC,YAAYxK,QAAQ8N,GAAa,MAQtDgE,GAAeA,EAAY,KAAOD,GACvCG,EAAQvL,KAAK,CAACyB,EAAM4J,EAAY,KAChCA,EAAcF,EAAYG,QAG5BF,GAAe,EAGjB,GAAIpO,EAAO+F,WAAaC,KAAKC,UAAW,CACtCL,EAAKQ,UAAY8F,EAAShG,WAAW,GACrCN,EAAKC,QAAUqG,EAAShG,WAAWgG,EAAShG,WAAWnJ,OAAS,GAKhE,IAHA,IAAIyR,EAAgBxO,EAEhBkF,EAAQgH,EAAShG,WAAW,GACzBhB,GACLlF,EAAO2E,WAAW+B,aAAaxB,EAAOsJ,EAAclI,aACpDkI,EAAgBtJ,EAChBA,EAAQgH,EAAShG,WAAW,QAG9BlG,EAAO+L,YAAYG,GAIvB,IAAK,IAAIhI,EAAQ,EAAGA,EAAQ0B,EAAK2I,QAAQxR,OAAQmH,GAAS,EAAG,KAAAuK,EAAA3B,GACpClH,EAAK2I,QAAQrK,GADuB,GACpDO,EADoDgK,EAAA,GAC9CC,EAD8CD,EAAA,GAEtD7I,EAAK8H,UAAY9H,EAAK8H,SAASxJ,KAAWuJ,EAAKvJ,IAClDwK,EAAO/R,EAAM8H,EAAMgJ,EAAKvJ,GAAQ0B,EAAK8H,SAAW9H,EAAK8H,SAASxJ,QAAS5H,GAIvE0D,EAAO+F,WAAaC,KAAKC,WAC3B7I,EAAS,SAACG,GACJZ,EAAK6C,aACHoG,EAAK8H,SACPnQ,EAAMoR,aAAahS,GAEnBY,EAAMqR,aAAajS,MAM3BiJ,EAAK8H,SAAWD,GCjUpB,IAAMoB,GAAW,IAAI3S,IACd,SAASO,GAAIwM,EAAc/N,GAChC,IAAK+N,EAAc,MAAM1G,MAAK,iCAAAzE,OAAkCmL,IAEhE,GAAyB,IAArBnM,UAAUC,OACZ,OAAO,SAACJ,GAAWA,EAAKsM,GAAgB/N,GAG1C,IAAImC,EAAKwR,GAAS/T,IAAImO,GAOtB,OALK5L,IACHA,EAAK,SAACV,EAADmS,GAAsB,IAAb9O,EAAa8O,EAAb9O,OAAerD,EAAKsM,GAAgBjJ,EAAO9E,OACzD2T,GAASpS,IAAIwM,EAAc5L,IAGtBA,EAGT,IAAM0R,GAAa,IAAIjP,QAChB,SAAS7B,GAAQ+Q,EAAS7H,GAA0B,IAAb8H,EAAanS,UAAAC,OAAA,QAAAT,IAAAQ,UAAA,GAAAA,UAAA,GAAL,IACpD,OAAO,SAACH,EAAMqD,GACZ,IAAIkP,EAEA/H,IACF+H,EAAUC,WAAW,WACnBD,OAAU5S,EAEVoE,sBAAsB,WACpByG,EAAYxK,EAAMqD,MAEnBiP,IAGLF,GAAWtS,IAAIuD,EAAQgP,GAEvBA,EAAQI,KAAK,SAAC/D,GACR6D,GAASG,aAAaH,GAEtBH,GAAWjU,IAAIkF,KAAYgP,IAC7B3D,EAAS1O,EAAMqD,GACf+O,GAAWtS,IAAIuD,EAAQ,UCnC/B,IAAMsP,GAAcvF,KACdwF,GAAkBxF,GAAe,OAEjCyF,GAAe,IAAItT,IACnBuT,GAAY,IAAI3P,QAEhB4P,GAAU,CACd/V,OADc,SACPyK,GAEL,OADAuL,EAAevL,GACRzB,MAETnH,IALc,SAKV0L,GAEF,OADAvE,KAAKuE,GAAKA,EACHvE,MAETkG,MATc,WASG,QAAA+G,EAAA9S,UAAAC,OAARqO,EAAQ,IAAA/I,MAAAuN,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAARzE,EAAQyE,GAAA/S,UAAA+S,GAEf,OADAJ,GAAUhT,IAAIkG,KAAMyI,GACbzI,OAIX,SAASpH,GAAO+P,EAAOmC,EAAMvE,GAgB3B,OAAOvO,OAAO+E,OAfS,SAAjBoQ,EAAkBnT,GAAwB,IAAlBqD,EAAkBlD,UAAAC,OAAA,QAAAT,IAAAQ,UAAA,GAAAA,UAAA,GAATH,EAC/ByO,EAASqE,GAAU3U,IAAIgV,GACzB5I,EAAKoE,EAAMI,KAAK4D,IAChBlE,IAAQlE,GAAMkE,EAAOM,KAAK4D,KAC1BpG,IAAOhC,GAAMqI,IAEjB,IAAInQ,EAASoQ,GAAa1U,IAAIoM,GACzB9H,IACHA,EAAS8L,GAAgBI,EAAOpC,EAAOkC,GACvCoE,GAAa/S,IAAIyK,EAAI9H,IAGvBA,EAAOzC,EAAMqD,EAAQyN,IAGciC,IAGhC,SAASK,GAAKzE,GAAgB,QAAA0E,EAAAlT,UAAAC,OAAN0Q,EAAM,IAAApL,MAAA2N,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAANxC,EAAMwC,EAAA,GAAAnT,UAAAmT,GACnC,OAAO1U,GAAO+P,EAAOmC,GAGhB,SAASyC,GAAI5E,GAAgB,QAAA6E,EAAArT,UAAAC,OAAN0Q,EAAM,IAAApL,MAAA8N,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAN3C,EAAM2C,EAAA,GAAAtT,UAAAsT,GAClC,OAAO7U,GAAO+P,EAAOmC,GAAM,GAG7B9S,OAAO+E,OAAOqQ,GAAMM,GACpB1V,OAAO+E,OAAOwQ,GAAKG,GCtDnBtW,EAAAQ,EAAA+V,EAAA,2BAAAC,IAAAxW,EAAAQ,EAAA+V,EAAA,6BAAA1U,IAAA7B,EAAAQ,EAAA+V,EAAA,2BAAAE,IAAAzW,EAAAQ,EAAA+V,EAAA,6BAAAzL,IAAA9K,EAAAQ,EAAA+V,EAAA,2BAAAG,IAAA1W,EAAAQ,EAAA+V,EAAA,6BAAA5T,IAAA3C,EAAAQ,EAAA+V,EAAA,yBAAAP,KAAAhW,EAAAQ,EAAA+V,EAAA,wBAAAJ","file":"hybrids.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hybrids\"] = factory();\n\telse\n\t\troot[\"hybrids\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const camelToDashMap = new Map();\nexport function camelToDash(str) {\n  let result = camelToDashMap.get(str);\n  if (result === undefined) {\n    result = str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    camelToDashMap.set(str, result);\n  }\n  return result;\n}\n\nexport function pascalToDash(str) {\n  return camelToDash(str.replace(/((?!([A-Z]{2}|^))[A-Z])/g, '-$1'));\n}\n\nexport function dispatch(host, eventType, options = {}) {\n  return host.dispatchEvent(new CustomEvent(eventType, { bubbles: false, ...options }));\n}\n\nexport function shadyCSS(fn, fallback) {\n  const shady = window.ShadyCSS;\n\n  /* istanbul ignore next */\n  if (shady && !shady.nativeShadow) {\n    return fn(shady);\n  }\n\n  return fallback;\n}\n\nexport function stringifyElement(element) {\n  const tagName = String(element.tagName).toLowerCase();\n  return `<${tagName}>`;\n}\n\nexport const IS_IE = 'ActiveXObject' in window;\nexport const deferred = Promise.resolve();\n","import { camelToDash } from './utils';\n\nconst defaultTransform = v => v;\n\nconst objectTransform = (value) => {\n  if (typeof value !== 'object') {\n    throw TypeError(`Assigned value must be an object: ${typeof v}`);\n  }\n  return value && Object.freeze(value);\n};\n\nexport default function property(value, connect) {\n  const type = typeof value;\n  let transform = defaultTransform;\n\n  switch (type) {\n    case 'string':\n      transform = String;\n      break;\n    case 'number':\n      transform = Number;\n      break;\n    case 'boolean':\n      transform = Boolean;\n      break;\n    case 'function':\n      transform = value;\n      value = transform();\n      break;\n    case 'object':\n      if (value) Object.freeze(value);\n      transform = objectTransform;\n      break;\n    default: break;\n  }\n\n  return {\n    get: (host, val = value) => val,\n    set: (host, val, oldValue) => transform(val, oldValue),\n    connect: type !== 'object' && type !== 'undefined'\n      ? (host, key, invalidate) => {\n        if (host[key] === value) {\n          const attrName = camelToDash(key);\n\n          if (host.hasAttribute(attrName)) {\n            const attrValue = host.getAttribute(attrName);\n            host[key] = attrValue !== '' ? attrValue : true;\n          }\n        }\n\n        return connect && connect(host, key, invalidate);\n      }\n      : connect,\n  };\n}\n","export default function render(get, customOptions = {}) {\n  if (typeof get !== 'function') {\n    throw TypeError(`The first argument must be a function: ${typeof get}`);\n  }\n\n  const options = { shadowRoot: true, ...customOptions };\n  const shadowRootInit = { mode: 'open' };\n\n  if (typeof options.shadowRoot === 'object') {\n    Object.assign(shadowRootInit, options.shadowRoot);\n  }\n\n  return {\n    get(host) {\n      const fn = get(host);\n      return function flush() {\n        fn(host, options.shadowRoot ? host.shadowRoot : host);\n      };\n    },\n    connect(host) {\n      if (options.shadowRoot && !host.shadowRoot) {\n        host.attachShadow(shadowRootInit);\n      }\n    },\n    observe(host, fn) {\n      fn();\n    },\n  };\n}\n","const targets = new WeakMap();\n\nfunction getListeners(target) {\n  let listeners = targets.get(target);\n  if (!listeners) {\n    listeners = new Set();\n    targets.set(target, listeners);\n  }\n  return listeners;\n}\n\nconst queue = new Set();\nconst run = fn => fn();\n\nfunction execute() {\n  try {\n    queue.forEach((target) => {\n      try {\n        getListeners(target).forEach(run);\n        queue.delete(target);\n      } catch (e) {\n        queue.delete(target);\n        throw e;\n      }\n    });\n  } catch (e) {\n    if (queue.size) execute();\n    throw e;\n  }\n}\n\nexport function dispatch(target) {\n  if (!queue.size) {\n    requestAnimationFrame(execute);\n  }\n  queue.add(target);\n}\n\nexport function subscribe(target, cb) {\n  const listeners = getListeners(target);\n  listeners.add(cb);\n  dispatch(target);\n\n  return () => listeners.delete(cb);\n}\n","import { stringifyElement } from './utils';\nimport * as emitter from './emitter';\n\nconst entries = new WeakMap();\nexport function getEntry(target, key) {\n  let targetMap = entries.get(target);\n  if (!targetMap) {\n    targetMap = new Map();\n    entries.set(target, targetMap);\n  }\n\n  let entry = targetMap.get(key);\n\n  if (!entry) {\n    entry = {\n      target,\n      key,\n      value: undefined,\n      contexts: undefined,\n      deps: undefined,\n      state: 1,\n      checksum: 0,\n      observed: false,\n    };\n    targetMap.set(key, entry);\n  }\n\n  return entry;\n}\n\nfunction calculateChecksum(entry) {\n  let checksum = entry.state;\n  if (entry.deps) {\n    entry.deps.forEach((depEntry) => {\n      // eslint-disable-next-line no-unused-expressions\n      depEntry.target[depEntry.key];\n      checksum += depEntry.state;\n    });\n  }\n\n  return checksum;\n}\n\nfunction dispatchDeep(entry) {\n  if (entry.observed) emitter.dispatch(entry);\n  if (entry.contexts) entry.contexts.forEach(dispatchDeep);\n}\n\nlet context = null;\nexport function get(target, key, getter) {\n  const entry = getEntry(target, key);\n\n  if (context === entry) {\n    context = null;\n    throw Error(`Circular '${key}' get invocation in '${stringifyElement(target)}'`);\n  }\n\n  if (context) {\n    context.deps = context.deps || new Set();\n    context.deps.add(entry);\n  }\n\n  if (context && (context.observed || (context.contexts && context.contexts.size))) {\n    entry.contexts = entry.contexts || new Set();\n    entry.contexts.add(context);\n  }\n\n  const parentContext = context;\n  context = entry;\n\n  if (entry.checksum && entry.checksum === calculateChecksum(entry)) {\n    context = parentContext;\n    return entry.value;\n  }\n\n  if (entry.deps && entry.deps.size) {\n    entry.deps.forEach((depEntry) => {\n      if (depEntry.contexts) depEntry.contexts.delete(entry);\n    });\n    entry.deps = undefined;\n  }\n\n  try {\n    const nextValue = getter(target, entry.value);\n\n    if (nextValue !== entry.value) {\n      entry.state += 1;\n      entry.value = nextValue;\n\n      dispatchDeep(entry);\n    }\n\n    entry.checksum = calculateChecksum(entry);\n    context = parentContext;\n  } catch (e) {\n    context = null;\n    throw e;\n  }\n\n  return entry.value;\n}\n\nexport function set(target, key, setter, value) {\n  if (context) {\n    context = null;\n    throw Error(`Try to set '${key}' of '${stringifyElement(target)}' in get call`);\n  }\n\n  const entry = getEntry(target, key);\n  const newValue = setter(target, value, entry.value);\n\n  if (newValue !== entry.value) {\n    entry.state += 1;\n    entry.value = newValue;\n\n    dispatchDeep(entry);\n  }\n}\n\nexport function invalidate(target, key, clearValue) {\n  if (context) {\n    context = null;\n    throw Error(`Try to invalidate '${key}' in '${stringifyElement(target)}' get call`);\n  }\n\n  const entry = getEntry(target, key);\n\n  entry.checksum = 0;\n  dispatchDeep(entry);\n\n  if (clearValue) {\n    entry.value = undefined;\n  }\n}\n\nexport function observe(target, key, fn) {\n  const entry = getEntry(target, key);\n  entry.observed = true;\n  return emitter.subscribe(entry, fn);\n}\n","import property from './property';\nimport render from './render';\n\nimport * as cache from './cache';\nimport { pascalToDash, deferred } from './utils';\n\n/* istanbul ignore next */\ntry { process.env.NODE_ENV } catch(e) { var process = { env: { NODE_ENV: 'production' } }; } // eslint-disable-line\n\nconst defaultMethod = (host, value) => value;\n\nfunction compile(Hybrid, descriptors) {\n  Hybrid.hybrids = descriptors;\n  Hybrid.callbacks = [];\n\n  Object.keys(descriptors).forEach((key) => {\n    const desc = descriptors[key];\n    const type = typeof desc;\n\n    let config;\n\n    if (type === 'function') {\n      config = key === 'render' ? render(desc) : { get: desc };\n    } else if (type !== 'object' || desc === null || (Array.isArray(desc))) {\n      config = property(desc);\n    } else {\n      config = {\n        get: desc.get || defaultMethod,\n        set: desc.set || (!desc.get && defaultMethod) || undefined,\n        connect: desc.connect,\n        observe: desc.observe,\n      };\n    }\n\n    Object.defineProperty(Hybrid.prototype, key, {\n      get: function get() {\n        return cache.get(this, key, config.get);\n      },\n      set: config.set && function set(newValue) {\n        cache.set(this, key, config.set, newValue);\n      },\n      enumerable: true,\n      configurable: process.env.NODE_ENV !== 'production',\n    });\n\n    if (config.connect) {\n      Hybrid.callbacks.push(host => config.connect(host, key, () => {\n        cache.invalidate(host, key);\n      }));\n    }\n\n    if (config.observe) {\n      Hybrid.callbacks.push((host) => {\n        let lastValue;\n        return cache.observe(host, key, () => {\n          const value = host[key];\n          if (value !== lastValue) {\n            config.observe(host, value, lastValue);\n            lastValue = value;\n          }\n        });\n      });\n    }\n  });\n}\n\nlet update;\n/* istanbul ignore else */\nif (process.env.NODE_ENV !== 'production') {\n  const walkInShadow = (node, fn) => {\n    fn(node);\n\n    Array.from(node.children)\n      .forEach(el => walkInShadow(el, fn));\n\n    if (node.shadowRoot) {\n      Array.from(node.shadowRoot.children)\n        .forEach(el => walkInShadow(el, fn));\n    }\n  };\n\n  const updateQueue = new Map();\n  update = (Hybrid, lastHybrids) => {\n    if (!updateQueue.size) {\n      deferred.then(() => {\n        walkInShadow(document.body, (node) => {\n          if (updateQueue.has(node.constructor)) {\n            const hybrids = updateQueue.get(node.constructor);\n            node.disconnectedCallback();\n\n            Object.keys(node.constructor.hybrids).forEach((key) => {\n              cache.invalidate(node, key, node[key] === hybrids[key]);\n            });\n\n            node.connectedCallback();\n          }\n        });\n        updateQueue.clear();\n      });\n    }\n    updateQueue.set(Hybrid, lastHybrids);\n  };\n}\n\nconst disconnects = new WeakMap();\n\nfunction defineElement(tagName, hybridsOrConstructor) {\n  const type = typeof hybridsOrConstructor;\n  if (type !== 'object' && type !== 'function') {\n    throw TypeError(`Second argument must be an object or a function: ${type}`);\n  }\n\n  const CustomElement = window.customElements.get(tagName);\n\n  if (type === 'function') {\n    if (CustomElement !== hybridsOrConstructor) {\n      return window.customElements.define(tagName, hybridsOrConstructor);\n    }\n    return CustomElement;\n  }\n\n  if (CustomElement) {\n    if (CustomElement.hybrids === hybridsOrConstructor) {\n      return CustomElement;\n    }\n    if (process.env.NODE_ENV !== 'production' && CustomElement.hybrids) {\n      Object.keys(CustomElement.hybrids).forEach((key) => {\n        delete CustomElement.prototype[key];\n      });\n\n      const lastHybrids = CustomElement.hybrids;\n\n      compile(CustomElement, hybridsOrConstructor);\n      update(CustomElement, lastHybrids);\n\n      return CustomElement;\n    }\n\n    throw Error(`Element '${tagName}' already defined`);\n  }\n\n  class Hybrid extends HTMLElement {\n    static get name() { return tagName; }\n\n    connectedCallback() {\n      const { callbacks } = this.constructor;\n      const list = [];\n\n      for (let index = 0; index < callbacks.length; index += 1) {\n        const cb = callbacks[index](this);\n        if (cb) list.push(cb);\n      }\n\n      disconnects.set(this, list);\n    }\n\n    disconnectedCallback() {\n      const list = disconnects.get(this);\n      for (let index = 0; index < list.length; index += 1) {\n        list[index]();\n      }\n    }\n  }\n\n  compile(Hybrid, hybridsOrConstructor);\n  customElements.define(tagName, Hybrid);\n\n  return Hybrid;\n}\n\nfunction defineMap(elements) {\n  return Object.keys(elements).reduce((acc, key) => {\n    const tagName = pascalToDash(key);\n    acc[key] = defineElement(tagName, elements[key]);\n\n    return acc;\n  }, {});\n}\n\nexport default function define(...args) {\n  if (typeof args[0] === 'object') {\n    return defineMap(args[0]);\n  }\n\n  return defineElement(...args);\n}\n","function walk(node, fn) {\n  let parentElement = node.parentElement || node.parentNode.host;\n\n  while (parentElement) {\n    const hybrids = parentElement.constructor.hybrids;\n\n    if (hybrids && fn(hybrids)) {\n      return parentElement;\n    }\n\n    parentElement = parentElement.parentElement\n      || (parentElement.parentNode && parentElement.parentNode.host);\n  }\n\n  return parentElement || null;\n}\n\nexport default function parent(hybridsOrFn) {\n  const fn = typeof hybridsOrFn === 'function' ? hybridsOrFn : hybrids => hybrids === hybridsOrFn;\n  return {\n    get: host => walk(host, fn),\n    connect(host, key, invalidate) {\n      const target = host[key];\n      if (target) {\n        return invalidate;\n      }\n      return false;\n    },\n  };\n}\n","function walk(node, fn, options, items = []) {\n  Array.from(node.children).forEach((child) => {\n    const hybrids = child.constructor.hybrids;\n    if (hybrids && fn(hybrids)) {\n      items.push(child);\n      if (options.deep && options.nested) {\n        walk(child, fn, options, items);\n      }\n    } else if (options.deep) {\n      walk(child, fn, options, items);\n    }\n  });\n\n  return items;\n}\n\nexport default function children(hybridsOrFn, options = { deep: false, nested: false }) {\n  const fn = typeof hybridsOrFn === 'function' ? hybridsOrFn : hybrids => hybrids === hybridsOrFn;\n  return {\n    get(host) { return walk(host, fn, options); },\n    connect(host, key, invalidate) {\n      const observer = new MutationObserver(invalidate);\n\n      observer.observe(host, {\n        childList: true, subtree: !!options.deep,\n      });\n\n      return () => { observer.disconnect(); };\n    },\n  };\n}\n","const map = new WeakMap();\nexport const dataMap = {\n  get(key, defaultValue) {\n    const value = map.get(key);\n    if (value) return value;\n\n    if (defaultValue) {\n      map.set(key, defaultValue);\n    }\n\n    return defaultValue;\n  },\n  set(key, value) {\n    map.set(key, value);\n    return value;\n  },\n};\n\nexport function getTemplateEnd(node) {\n  let data;\n  // eslint-disable-next-line no-cond-assign\n  while (node && (data = dataMap.get(node)) && data.endNode) {\n    node = data.endNode;\n  }\n\n  return node;\n}\n\nexport function removeTemplate(target) {\n  if (target.nodeType !== Node.TEXT_NODE) {\n    let child = target.childNodes[0];\n    while (child) {\n      target.removeChild(child);\n      child = target.childNodes[0];\n    }\n  } else {\n    const data = dataMap.get(target);\n\n    if (data.startNode) {\n      const endNode = getTemplateEnd(data.endNode);\n\n      let node = data.startNode;\n      const lastNextSibling = endNode.nextSibling;\n\n      while (node) {\n        const nextSibling = node.nextSibling;\n        node.parentNode.removeChild(node);\n        node = nextSibling !== lastNextSibling && nextSibling;\n      }\n    }\n  }\n}\n","import {\n  dataMap, removeTemplate, getTemplateEnd,\n} from '../utils';\n\n// eslint-disable-next-line import/no-cycle\nimport resolveValue from './value';\n\nexport const arrayMap = new WeakMap();\n\nfunction movePlaceholder(target, previousSibling) {\n  const data = dataMap.get(target);\n  const startNode = data.startNode;\n  const endNode = getTemplateEnd(data.endNode);\n\n  previousSibling.parentNode.insertBefore(target, previousSibling.nextSibling);\n\n  let prevNode = target;\n  let node = startNode;\n  while (node) {\n    const nextNode = node.nextSibling;\n    prevNode.parentNode.insertBefore(node, prevNode.nextSibling);\n    prevNode = node;\n    node = nextNode !== endNode.nextSibling && nextNode;\n  }\n}\n\nexport default function resolveArray(host, target, value) {\n  let lastEntries = arrayMap.get(target);\n  const entries = value.map((item, index) => ({\n    id: Object.prototype.hasOwnProperty.call(item, 'id') ? item.id : index,\n    value: item,\n    placeholder: null,\n    available: true,\n  }));\n\n  arrayMap.set(target, entries);\n\n  if (lastEntries) {\n    const ids = new Set();\n    entries.forEach(entry => ids.add(entry.id));\n\n    lastEntries = lastEntries.filter((entry) => {\n      if (!ids.has(entry.id)) {\n        removeTemplate(entry.placeholder);\n        entry.placeholder.parentNode.removeChild(entry.placeholder);\n        return false;\n      }\n\n      return true;\n    });\n  }\n\n  let previousSibling = target;\n  const lastIndex = value.length - 1;\n  const data = dataMap.get(target);\n\n  for (let index = 0; index < entries.length; index += 1) {\n    const entry = entries[index];\n    let matchedEntry;\n    if (lastEntries) {\n      for (let i = 0; i < lastEntries.length; i += 1) {\n        if (lastEntries[i].available && lastEntries[i].id === entry.id) {\n          matchedEntry = lastEntries[i];\n          break;\n        }\n      }\n    }\n\n    let placeholder;\n    if (matchedEntry) {\n      matchedEntry.available = false;\n      placeholder = matchedEntry.placeholder;\n\n      if (placeholder.previousSibling !== previousSibling) {\n        movePlaceholder(placeholder, previousSibling);\n      }\n      if (matchedEntry.value !== entry.value) {\n        resolveValue(host, placeholder, entry.value);\n      }\n    } else {\n      placeholder = document.createTextNode('');\n      previousSibling.parentNode.insertBefore(placeholder, previousSibling.nextSibling);\n      resolveValue(host, placeholder, entry.value);\n    }\n\n    previousSibling = getTemplateEnd(dataMap.get(placeholder).endNode || placeholder);\n\n    if (index === 0) data.startNode = placeholder;\n    if (index === lastIndex) data.endNode = previousSibling;\n\n    entry.placeholder = placeholder;\n  }\n\n  if (lastEntries) {\n    lastEntries.forEach((entry) => {\n      if (entry.available) {\n        removeTemplate(entry.placeholder);\n        entry.placeholder.parentNode.removeChild(entry.placeholder);\n      }\n    });\n  }\n}\n","import { dataMap, removeTemplate } from '../utils';\n// eslint-disable-next-line import/no-cycle\nimport resolveArray, { arrayMap } from './array';\n\nexport default function resolveValue(host, target, value) {\n  const type = Array.isArray(value) ? 'array' : typeof value;\n  let data = dataMap.get(target, {});\n\n  if (data.type !== type) {\n    removeTemplate(target);\n    if (type === 'array') arrayMap.delete(target);\n\n    data = dataMap.set(target, { type });\n\n    if (target.textContent !== '') {\n      target.textContent = '';\n    }\n  }\n\n  switch (type) {\n    case 'function':\n      value(host, target);\n      break;\n    case 'array':\n      resolveArray(host, target, value);\n      break;\n    default:\n      target.textContent = type === 'number' || value ? value : '';\n  }\n}\n","const eventMap = new WeakMap();\n\nexport default function resolveEventListener(eventType) {\n  return (host, target, value, lastValue) => {\n    if (lastValue) {\n      target.removeEventListener(\n        eventType,\n        eventMap.get(lastValue),\n        lastValue.options !== undefined ? lastValue.options : false,\n      );\n    }\n\n    if (value) {\n      if (typeof value !== 'function') {\n        throw Error(`Event listener must be a function: ${typeof value}`);\n      }\n\n      eventMap.set(value, value.bind(null, host));\n\n      target.addEventListener(\n        eventType,\n        eventMap.get(value),\n        value.options !== undefined ? value.options : false,\n      );\n    }\n  };\n}\n","function normalizeValue(value, set = new Set()) {\n  if (Array.isArray(value)) {\n    value.forEach(className => set.add(className));\n  } else if (value !== null && typeof value === 'object') {\n    Object.keys(value).forEach(key => value[key] && set.add(key));\n  } else {\n    set.add(value);\n  }\n\n  return set;\n}\n\nconst classMap = new WeakMap();\n\nexport default function resolveClassList(host, target, value) {\n  const previousList = classMap.get(target) || new Set();\n  const list = normalizeValue(value);\n\n  classMap.set(target, list);\n\n  list.forEach((className) => {\n    target.classList.add(className);\n    previousList.delete(className);\n  });\n\n  previousList.forEach((className) => {\n    target.classList.remove(className);\n  });\n}\n","import { camelToDash, stringifyElement } from '../../utils';\n\nconst styleMap = new WeakMap();\n\nexport default function resolveStyle(host, target, value) {\n  if (value === null || typeof value !== 'object') {\n    throw TypeError(`Style value must be an object in ${stringifyElement(target)}:`, value);\n  }\n\n  const previousMap = styleMap.get(target) || new Map();\n\n  const nextMap = Object.keys(value).reduce((map, key) => {\n    const dashKey = camelToDash(key);\n    const styleValue = value[key];\n\n    if (!styleValue && styleValue !== 0) {\n      target.style.removeProperty(dashKey);\n    } else {\n      target.style.setProperty(dashKey, styleValue);\n    }\n\n    map.set(dashKey, styleValue);\n    previousMap.delete(dashKey);\n\n    return map;\n  }, new Map());\n\n  previousMap.forEach((styleValue, key) => { target.style[key] = ''; });\n\n  styleMap.set(target, nextMap);\n}\n","import resolveEventListener from './event';\nimport resolveClassList from './class';\nimport resolveStyleList from './style';\n\nexport default function resolveProperty(attrName, propertyName, isSVG) {\n  if (propertyName.substr(0, 2) === 'on') {\n    const eventType = propertyName.substr(2);\n    return resolveEventListener(eventType);\n  }\n\n  switch (attrName) {\n    case 'class': return resolveClassList;\n    case 'style': return resolveStyleList;\n    default:\n      return (host, target, value) => {\n        if (!isSVG && !(target instanceof SVGElement) && (propertyName in target)) {\n          if (target[propertyName] !== value) {\n            target[propertyName] = value;\n          }\n        } else if (value === false || value === undefined || value === null) {\n          target.removeAttribute(attrName);\n        } else {\n          const attrValue = value === true ? '' : String(value);\n          target.setAttribute(attrName, attrValue);\n        }\n      };\n  }\n}\n","import { stringifyElement, shadyCSS, IS_IE } from '../utils';\nimport { dataMap, removeTemplate } from './utils';\n\nimport resolveValue from './resolvers/value';\nimport resolveProperty from './resolvers/property';\n\n/* istanbul ignore next */\ntry { process.env.NODE_ENV } catch(e) { var process = { env: { NODE_ENV: 'production' } }; } // eslint-disable-line\n\nconst TIMESTAMP = Date.now();\n\nexport const getPlaceholder = (id = 0) => `{{h-${TIMESTAMP}-${id}}}`;\n\nconst PLACEHOLDER_REGEXP_TEXT = getPlaceholder('(\\\\d+)');\nconst PLACEHOLDER_REGEXP_EQUAL = new RegExp(`^${PLACEHOLDER_REGEXP_TEXT}$`);\nconst PLACEHOLDER_REGEXP_ALL = new RegExp(PLACEHOLDER_REGEXP_TEXT, 'g');\n\nconst ATTR_PREFIX = `--${TIMESTAMP}--`;\nconst ATTR_REGEXP = new RegExp(ATTR_PREFIX, 'g');\n\nconst preparedTemplates = new WeakMap();\n\n/* istanbul ignore next */\nfunction applyShadyCSS(template, tagName) {\n  if (!tagName) return template;\n\n  return shadyCSS((shady) => {\n    let map = preparedTemplates.get(template);\n    if (!map) {\n      map = new Map();\n      preparedTemplates.set(template, map);\n    }\n\n    let clone = map.get(tagName);\n\n    if (!clone) {\n      clone = document.createElement('template');\n      clone.content.appendChild(template.content.cloneNode(true));\n\n      map.set(tagName, clone);\n\n      const styles = clone.content.querySelectorAll('style');\n\n      Array.from(styles).forEach((style) => {\n        const count = style.childNodes.length + 1;\n        for (let i = 0; i < count; i += 1) {\n          style.parentNode.insertBefore(document.createTextNode(getPlaceholder()), style);\n        }\n      });\n\n      shady.prepareTemplate(clone, tagName.toLowerCase());\n    }\n    return clone;\n  }, template);\n}\n\nfunction createSignature(parts, styles) {\n  let signature = parts.reduce((acc, part, index) => {\n    if (index === 0) {\n      return part;\n    }\n\n    if (parts.slice(index).join('').match(/^\\s*<\\/\\s*(table|tr|thead|tbody|tfoot|colgroup)>/)) {\n      return `${acc}<!--${getPlaceholder(index - 1)}-->${part}`;\n    }\n    return acc + getPlaceholder(index - 1) + part;\n  }, '');\n\n  if (styles) {\n    signature += `<style>\\n${styles.join('\\n/*------*/\\n')}\\n</style>`;\n  }\n\n  /* istanbul ignore if */\n  if (IS_IE) {\n    return signature.replace(\n      /style\\s*=\\s*([\"][^\"]+[\"]|['][^']+[']|[^\\s\"'<>/]+)/g,\n      match => `${ATTR_PREFIX}${match}`,\n    );\n  }\n\n  return signature;\n}\n\nfunction getPropertyName(string) {\n  return string.replace(/\\s*=\\s*['\"]*$/g, '').split(' ').pop();\n}\n\nfunction replaceComments(fragment) {\n  const iterator = document.createNodeIterator(fragment, NodeFilter.SHOW_COMMENT, null, false);\n  let node;\n  // eslint-disable-next-line no-cond-assign\n  while (node = iterator.nextNode()) {\n    if (PLACEHOLDER_REGEXP_EQUAL.test(node.textContent)) {\n      node.parentNode.insertBefore(document.createTextNode(node.textContent), node);\n      node.parentNode.removeChild(node);\n    }\n  }\n}\n\nexport function createInternalWalker(context) {\n  let node;\n\n  return {\n    get currentNode() { return node; },\n    nextNode() {\n      if (node === undefined) {\n        node = context.childNodes[0];\n      } else if (node.childNodes.length) {\n        node = node.childNodes[0];\n      } else if (node.nextSibling) {\n        node = node.nextSibling;\n      } else {\n        node = node.parentNode.nextSibling;\n      }\n\n      return !!node;\n    },\n  };\n}\n\nfunction createExternalWalker(context) {\n  return document.createTreeWalker(\n    context,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT,\n    null,\n    false,\n  );\n}\n\n/* istanbul ignore next */\nconst createWalker = typeof window.ShadyDOM === 'object' && window.ShadyDOM.inUse ? createInternalWalker : createExternalWalker;\n\nconst container = document.createElement('div');\nexport function compileTemplate(rawParts, isSVG, styles) {\n  const template = document.createElement('template');\n  const parts = [];\n\n  let signature = createSignature(rawParts, styles);\n  if (isSVG) signature = `<svg>${signature}</svg>`;\n\n  /* istanbul ignore if */\n  if (IS_IE) {\n    template.innerHTML = signature;\n  } else {\n    container.innerHTML = `<template>${signature}</template>`;\n    template.content.appendChild(container.children[0].content);\n  }\n\n  if (isSVG) {\n    const svgRoot = template.content.firstChild;\n    template.content.removeChild(svgRoot);\n    Array.from(svgRoot.childNodes).forEach(node => template.content.appendChild(node));\n  }\n\n  replaceComments(template.content);\n\n  const compileWalker = createWalker(template.content);\n  let compileIndex = 0;\n\n  while (compileWalker.nextNode()) {\n    const node = compileWalker.currentNode;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n      const text = node.textContent;\n\n      if (!text.match(PLACEHOLDER_REGEXP_EQUAL)) {\n        const results = text.match(PLACEHOLDER_REGEXP_ALL);\n        if (results) {\n          let currentNode = node;\n          results\n            .reduce((acc, placeholder) => {\n              const [before, next] = acc.pop().split(placeholder);\n              if (before) acc.push(before);\n              acc.push(placeholder);\n              if (next) acc.push(next);\n              return acc;\n            }, [text])\n            .forEach((part, index) => {\n              if (index === 0) {\n                currentNode.textContent = part;\n              } else {\n                currentNode = currentNode.parentNode\n                  .insertBefore(document.createTextNode(part), currentNode.nextSibling);\n              }\n            });\n        }\n      }\n\n      const equal = node.textContent.match(PLACEHOLDER_REGEXP_EQUAL);\n      if (equal) {\n        /* istanbul ignore else */\n        if (!IS_IE) node.textContent = '';\n        parts[equal[1]] = [compileIndex, resolveValue];\n      }\n    } else {\n      /* istanbul ignore else */ // eslint-disable-next-line no-lonely-if\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        Array.from(node.attributes).forEach((attr) => {\n          const value = attr.value.trim();\n          /* istanbul ignore next */\n          const name = IS_IE ? attr.name.replace(ATTR_PREFIX, '') : attr.name;\n          const equal = value.match(PLACEHOLDER_REGEXP_EQUAL);\n          if (equal) {\n            const propertyName = getPropertyName(rawParts[equal[1]]);\n            parts[equal[1]] = [compileIndex, resolveProperty(name, propertyName, isSVG)];\n            node.removeAttribute(attr.name);\n          } else {\n            const results = value.match(PLACEHOLDER_REGEXP_ALL);\n            if (results) {\n              const partialName = `attr__${name}`;\n\n              results.forEach((placeholder, index) => {\n                const [, id] = placeholder.match(PLACEHOLDER_REGEXP_EQUAL);\n                parts[id] = [compileIndex, (host, target, attrValue) => {\n                  const data = dataMap.get(target, {});\n                  data[partialName] = (data[partialName] || value).replace(placeholder, attrValue == null ? '' : attrValue);\n\n                  if ((results.length === 1) || (index + 1 === results.length)) {\n                    target.setAttribute(name, data[partialName]);\n                    data[partialName] = undefined;\n                  }\n                }];\n              });\n\n              attr.value = '';\n\n              /* istanbul ignore next */\n              if (IS_IE && name !== attr.name) {\n                node.removeAttribute(attr.name);\n                node.setAttribute(name, '');\n              }\n            }\n          }\n        });\n      }\n    }\n\n    compileIndex += 1;\n  }\n\n  return function updateTemplateInstance(host, target, args) {\n    const data = dataMap.get(target, { type: 'function' });\n\n    if (template !== data.template) {\n      if (data.template || target.nodeType === Node.ELEMENT_NODE) removeTemplate(target);\n      data.lastArgs = null;\n\n      const fragment = document.importNode(applyShadyCSS(template, host.tagName).content, true);\n\n      const renderWalker = createWalker(fragment);\n      const clonedParts = parts.slice(0);\n\n      let renderIndex = 0;\n      let currentPart = clonedParts.shift();\n\n      const markers = [];\n\n      data.template = template;\n      data.markers = markers;\n\n      while (renderWalker.nextNode()) {\n        const node = renderWalker.currentNode;\n\n        if (node.nodeType === Node.TEXT_NODE) {\n          /* istanbul ignore next */\n          if (PLACEHOLDER_REGEXP_EQUAL.test(node.textContent)) {\n            node.textContent = '';\n          } else if (IS_IE) {\n            node.textContent = node.textContent.replace(ATTR_REGEXP, '');\n          }\n        } else if (process.env.NODE_ENV !== 'production' && node.nodeType === Node.ELEMENT_NODE) {\n          if (node.tagName.indexOf('-') > -1 && !customElements.get(node.tagName.toLowerCase())) {\n            throw Error(`Missing '${stringifyElement(node)}' element definition in '${stringifyElement(host)}'`);\n          }\n        }\n\n        while (currentPart && currentPart[0] === renderIndex) {\n          markers.push([node, currentPart[1]]);\n          currentPart = clonedParts.shift();\n        }\n\n        renderIndex += 1;\n      }\n\n      if (target.nodeType === Node.TEXT_NODE) {\n        data.startNode = fragment.childNodes[0];\n        data.endNode = fragment.childNodes[fragment.childNodes.length - 1];\n\n        let previousChild = target;\n\n        let child = fragment.childNodes[0];\n        while (child) {\n          target.parentNode.insertBefore(child, previousChild.nextSibling);\n          previousChild = child;\n          child = fragment.childNodes[0];\n        }\n      } else {\n        target.appendChild(fragment);\n      }\n    }\n\n    for (let index = 0; index < data.markers.length; index += 1) {\n      const [node, marker] = data.markers[index];\n      if (!data.lastArgs || data.lastArgs[index] !== args[index]) {\n        marker(host, node, args[index], data.lastArgs ? data.lastArgs[index] : undefined);\n      }\n    }\n\n    if (target.nodeType !== Node.TEXT_NODE) {\n      shadyCSS((shady) => {\n        if (host.shadowRoot) {\n          if (data.lastArgs) {\n            shady.styleSubtree(host);\n          } else {\n            shady.styleElement(host);\n          }\n        }\n      });\n    }\n\n    data.lastArgs = args;\n  };\n}\n","const setCache = new Map();\nexport function set(propertyName, value) {\n  if (!propertyName) throw Error(`Target property name missing: ${propertyName}`);\n\n  if (arguments.length === 2) {\n    return (host) => { host[propertyName] = value; };\n  }\n\n  let fn = setCache.get(propertyName);\n\n  if (!fn) {\n    fn = (host, { target }) => { host[propertyName] = target.value; };\n    setCache.set(propertyName, fn);\n  }\n\n  return fn;\n}\n\nconst promiseMap = new WeakMap();\nexport function resolve(promise, placeholder, delay = 200) {\n  return (host, target) => {\n    let timeout;\n\n    if (placeholder) {\n      timeout = setTimeout(() => {\n        timeout = undefined;\n\n        requestAnimationFrame(() => {\n          placeholder(host, target);\n        });\n      }, delay);\n    }\n\n    promiseMap.set(target, promise);\n\n    promise.then((template) => {\n      if (timeout) clearTimeout(timeout);\n\n      if (promiseMap.get(target) === promise) {\n        template(host, target);\n        promiseMap.set(target, null);\n      }\n    });\n  };\n}\n","import defineElements from '../define';\n\nimport { compileTemplate, getPlaceholder } from './core';\nimport * as helpers from './helpers';\n\nconst PLACEHOLDER = getPlaceholder();\nconst SVG_PLACEHOLDER = getPlaceholder('svg');\n\nconst templatesMap = new Map();\nconst stylesMap = new WeakMap();\n\nconst methods = {\n  define(elements) {\n    defineElements(elements);\n    return this;\n  },\n  key(id) {\n    this.id = id;\n    return this;\n  },\n  style(...styles) {\n    stylesMap.set(this, styles);\n    return this;\n  },\n};\n\nfunction create(parts, args, isSVG) {\n  const createTemplate = (host, target = host) => {\n    const styles = stylesMap.get(createTemplate);\n    let id = parts.join(PLACEHOLDER);\n    if (styles) id += styles.join(PLACEHOLDER);\n    if (isSVG) id += SVG_PLACEHOLDER;\n\n    let render = templatesMap.get(id);\n    if (!render) {\n      render = compileTemplate(parts, isSVG, styles);\n      templatesMap.set(id, render);\n    }\n\n    render(host, target, args);\n  };\n\n  return Object.assign(createTemplate, methods);\n}\n\nexport function html(parts, ...args) {\n  return create(parts, args);\n}\n\nexport function svg(parts, ...args) {\n  return create(parts, args, true);\n}\n\nObject.assign(html, helpers);\nObject.assign(svg, helpers);\n","export { default as define } from './define';\nexport { default as property } from './property';\nexport { default as parent } from './parent';\nexport { default as children } from './children';\nexport { default as render } from './render';\n\nexport { dispatch } from './utils';\n\nexport { html, svg } from './template';\n"],"sourceRoot":""}